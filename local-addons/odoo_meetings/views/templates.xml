<odoo>
  <data>
    <!-- <template id="assets_frontend" name="account assets" inherit_id="web.assets_frontend">
        <xpath expr="." position="inside">
                <link rel="stylesheet" href="/odoo_meetings/static/src/css/style.css"/>
            </xpath>
    </template> -->

    <template id="assets_frontend" name="account assets" inherit_id="web.assets_frontend">
      <xpath expr="." position="inside">
        <link rel="stylesheet" href="/odoo_meetings/static/src/css/style.css"/>
        <script src="/odoo_meetings/static/src/js/show_description.js" type="text/javascript" />
        <script src="/odoo_meetings/static/src/js/update_time.js" type="text/javascript" />
      </xpath>
    </template>

    <template id="assets_backend" name="account assets" inherit_id="web.assets_backend">
      <xpath expr="." position="inside">
        <link rel="stylesheet" href="/odoo_meetings/static/src/css/style.css"/>
      </xpath>
    </template>
    <!--
        <template id="listing">
          <ul>
            <li t-foreach="objects" t-as="object">
              <a t-attf-href="#{ root }/objects/#{ object.id }">
                <t t-esc="object.display_name"/>
              </a>
            </li>
          </ul>
        </template>
        <template id="object">
          <h1><t t-esc="object.display_name"/></h1>
          <dl>
            <t t-foreach="object._fields" t-as="field">
              <dt><t t-esc="field"/></dt>
              <dd><t t-esc="object[field]"/></dd>
            </t>
          </dl>
        </template>
-->

    <!-- <template id="index">
      <title>MeetingType</title>
      <t t-foreach="meetingTypes" t-as="meetingType">
        <p>
          <p><t t-esc="meetingType.id"/> <t t-esc="meetingType.name"/></p>
        </p>
      </t>
    </template> -->

    <template id="index">
      <t t-call="website.layout">
        <t t-set="title">Odoo Meetings</t>
        <div class="oe_structure">
          <div class="container py-4">
            <h2>Programar una reunión</h2>

            <form>


              <div class="row">
                <div class="col-lg-12">
                  <p>Selecciona un tipo de reunión:</p>

                  <t t-set="meetingTypeSelectedIndex" t-value="0"/>

                  <select name="meetingTypeSelect" class="form-control" id="meetingTypeSelect" onchange="show_description(this)">
                    <t t-foreach="meetingTypes" t-as="meetingType">
                      <option>
                        <t t-esc="meetingType.name"/>
                        <!-- <t t-esc="meetingType_index"/> -->
                      </option>
                      <t t-set="meetingTypeSelectedIndex" t-value="5"/>
                    </t>

                  </select>

                  <div id="meetingTypeDescription">
                    <t t-foreach="meetingTypes" t-as="meetingType">
                      <p t-if="meetingType_first" class="d-block">
                        <t t-esc="meetingType.description"/>
                        <a t-attf-href="/odoo-meetings/#{meetingType.id}" class="btn btn-primary">
                          Siguiente
                        </a>
                      </p>
                      <p t-else="meetingType_first" class="d-none">
                        <t t-esc="meetingType.description"/>
                        <a t-attf-href="/odoo-meetings/#{meetingType.id}" class="btn btn-primary">
                          Siguiente
                        </a>
                      </p>
                    </t>
                  </div>


                </div>

                <!-- <div class="col-lg-12">
                  <div class="form-group">
                    <label for="date" class="control-label">Fecha</label>
                    <input type="date" name="date" min="2018-01-01" max="2018-12-31" required="required" class="form-control o_website_form_date" />
                  </div>
                  <div class="form-group">
                    <label for="hour" class="control-label">Hora</label>
                    <input type="text" name="hour" required="required"/>
                  </div>
                  <div class="form-group">
                    <label for="name" class="control-label">Nombre</label>
                    <input type="text" name="name" required="required"/>
                  </div>
                  <div class="form-group">
                    <label for="email" class="control-label">Fecha</label>
                    <input type="email" name="email" required="required"/>
                  </div>
                  <div class="form-group">
                    <label for="comments" class="control-label">Comentarios</label>
                    <input type="textarea" name="comments" required="required"/>
                  </div> -->


                <!-- <button type="submit" class="btn btn-primary">Enviar</button> -->
                <!-- </div> -->
              </div>
            </form>



            <!-- <t t-foreach="meetingTypes" t-as="meetingType">
                <p>
                  <t t-esc="meetingType.description"/>
                  <div t-field="meetingType.start_date"/>
                </p>
              </t>             -->


          </div>

        </div>


      </t>
    </template>

    <template id="select_time">
      <t t-call="website.layout">
        <t t-set="title">Odoo Meetings</t>
        <div class="oe_structure">
          <div class="container py-4">
            <h2>Seleccionar fecha y hora</h2>

            <form action="/odoo-meetings/submit">
              <!-- <div class="row">
                <div class="col-lg-12">
                  <p>Selecciona la fecha y hora que prefieras para el tipo de reunión "<t t-esc="meetingType.name"/>"</p>
                  <p>
                    <t t-esc="meetingType.duration"/>
                  </p>
                  <p>
                    <t t-esc="meetingType.start_date"/>
                  </p>
                  <p>
                    <t t-esc="meetingType.end_date"/>
                  </p>
                  <p>
                    <t t-esc="meetingTypeId"/>
                  </p>
                  <t t-foreach="employees" t-as="employee">
                    <p>
                      <t t-esc="employee.id"/>
                      <t t-esc="employee.name"/>
                    </p>
                  </t>
                  <t t-foreach="resources" t-as="res">
                    <p>
                      <t t-esc="res.calendar_id.name"/>
                      <t t-esc="employee.name"/>
                    </p>
                  </t>
                  <t t-foreach="monday" t-as="hours">
                    <t t-foreach="hours" t-as="hour">
                      <p>
                        <t t-esc="hour"/>
                      </p>
                    </t>
                  </t>
                </div>
              </div> -->

              <p>Selecciona la fecha y hora que prefieras para el tipo de reunión "<t t-esc="meetingType.name"/>". La duración es de <t t-esc="meetingType.duration"/> minutos.</p>
              <div class="row">
                <div class="col-lg-6">
                  <div class="form-group">
                    <label for="date" class="control-label">Fecha</label>
                    <input type="date" name="date" t-attf-min="#{today}" t-attf-max="#{meetingType.end_date}" required="required" class="form-control o_website_form_date" onchange="update_time(this)" />
                  </div>
                </div>
                <div class="col-lg-6">
                  <div id="time-select-container" class="d-none">
                    <label for="time-select" class="control-label" id="time-select-label">Hora</label>
                    <select name="time-select" class="form-control" id="time-select" required="required">
                      <option value="" disabled="true" hidden="true">Elige una hora</option>
                      <t t-foreach="monday" t-as="hours">
                        <t t-foreach="hours" t-as="hour">
                          <option data-day="monday" t-attf-class="d-none">
                            <t t-esc="hour"/>
                          </option>
                        </t>
                      </t>
                      <t t-foreach="tuesday" t-as="hours">
                        <t t-foreach="hours" t-as="hour">
                          <option data-day="tuesday" t-attf-class="d-none">
                            <t t-esc="hour"/>
                          </option>
                        </t>
                      </t>
                      <t t-foreach="wednesday" t-as="hours">
                        <t t-foreach="hours" t-as="hour">
                          <option data-day="wednesday" t-attf-class="d-none">
                            <t t-esc="hour"/>
                          </option>
                        </t>
                      </t>
                      <t t-foreach="thursday" t-as="hours">
                        <t t-foreach="hours" t-as="hour">
                          <option data-day="thursday" t-attf-class="d-none">
                            <t t-esc="hour"/>
                          </option>
                        </t>
                      </t>
                      <t t-foreach="friday" t-as="hours">
                        <t t-foreach="hours" t-as="hour">
                          <option data-day="friday" t-attf-class="d-none">
                            <t t-esc="hour"/>
                          </option>
                        </t>
                      </t>
                      <t t-foreach="saturday" t-as="hours">
                        <t t-foreach="hours" t-as="hour">
                          <option data-day="saturday" t-attf-class="d-none">
                            <t t-esc="hour"/>
                          </option>
                        </t>
                      </t>
                      <t t-foreach="sunday" t-as="hours">
                        <t t-foreach="hours" t-as="hour">
                          <option data-day="sunday" t-attf-class="d-none">
                            <t t-esc="hour"/>
                          </option>
                        </t>
                      </t>
                    </select>
                  </div>
                </div>
              </div>

              <h2>Introduce tus datos</h2>
              <p>Introduce tus datos personales y confirma la reunión. ¡Te enviaremos un correo electrónico de confirmación!</p>
              <div class="row">
                <div class="col">
                  <label for="name" class="control-label">Nombre *</label>
                  <input type="text" name="name" class="form-control" required="required"/>

                </div>
                <div class="col">
                  <label for="email" class="control-label">Email *</label>
                  <input type="email" name="email" class="form-control" required="required"/>
                </div>
              </div>
              <div class="form-group pt-2">
                <label for="comments" class="control-label">Comentarios</label>
                <textarea name="comments" class="form-control" rows="3"/>
              </div>
              <input type="hidden" name="meetingTypeId" t-att-value="meetingTypeId"/>
              <input type="hidden" name="meetingDuration" t-att-value="meetingDuration"/>
              <input class="btn btn-secondary" type="button" value="Volver" onclick="history.back()" />
              <button type="submit" class="btn btn-primary">Confirmar reunión</button>
        </form>
      </div>
    </div>
  </t>
</template>


<template id="form_success" name="Form Successfully Submitted">
  <t t-call="website.layout">
    <div id="wrap">
      <div class="container">
        <div class="col-md-12">
          <div class="alert alert-success">
            La reunión se ha programado con éxito. Recibirás un correo electrónico con la confirmación de la reunión.
          </div>
        </div>
      </div>
    </div>
  </t>
</template>

<template id="form_failure" name="Form Error">
  <t t-call="website.layout">
    <div id="wrap">
      <div class="container">
        <div class="col-md-12">
          <div class="alert alert-danger">
              Oops, no hay nadie disponible. Prueba otra hora.
          </div>
          <input class="btn btn-primary mb-5" type="button" value="Volver" onclick="history.back()" />
        </div>
      </div>
    </div>
  </t>
</template>

</data>
</odoo>